<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Process ↔ Signal Calculator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  background: #0a0a0a;
  color: #eeeeee;
  text-align: center;
  padding: 20px;
}
.box {
  background: #1a1a1a;
  padding: 30px;
  border-radius: 12px;
  max-width: 440px;
  margin: auto;
  border: 1px solid #333;
  box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}
h2 { color: #fff; margin-bottom: 25px; }
h3 {
  font-size: 14px; color: #888; text-transform: uppercase;
  margin-top: 20px; border-bottom: 1px solid #333; padding-bottom: 5px;
  text-align: left; width: 90%; margin: auto;
}
input {
  width: 90%; padding: 12px; margin: 8px 0;
  border-radius: 6px; border: 1px solid #444;
  background: #222; color: #fff;
}
button {
  width: 90%; padding: 12px; margin: 10px 0;
  border-radius: 6px; border: 1px solid #555;
  cursor: pointer; background: #333; color: #fff;
  font-weight: 600;
}
.result {
  font-size: 20px; margin-top: 25px; padding: 15px;
  background: #111; border-radius: 8px; color: #fff;
  border: 1px solid #333;
}
#liveCounter {
  position: fixed; bottom: 12px; right: 12px;
  background: #111; border: 1px solid #333;
  color: #aaa; padding: 6px 10px; border-radius: 8px;
  font-size: 13px; opacity: 0.9; pointer-events: none;
}
</style>
</head>

<body>

<div class="box">
<h2>Process ↔ Signal</h2>

<h3>Process Scale</h3>
<input id="procMin" type="number" value="0">
<input id="procMax" type="number" value="100">

<h3>Signal Scale</h3>
<input id="sigMin" type="number" value="4">
<input id="sigMax" type="number" value="20">

<h3>Process → Signal</h3>
<input id="procInput" type="number" placeholder="Enter Process">
<button onclick="processToSignal()">Convert to Signal</button>

<h3>Signal → Process</h3>
<input id="sigInput" type="number" placeholder="Enter Signal">
<button onclick="signalToProcess()">Convert to Process</button>

<div class="result" id="output">Ready to convert</div>
</div>

<div id="liveCounter">Loading visits...</div>

<script>
/* Calculator functions */
function getScale() {
  return {
    pMin: parseFloat(document.getElementById("procMin").value),
    pMax: parseFloat(document.getElementById("procMax").value),
    sMin: parseFloat(document.getElementById("sigMin").value),
    sMax: parseFloat(document.getElementById("sigMax").value)
  };
}
function processToSignal() {
  const s = getScale();
  const p = parseFloat(document.getElementById("procInput").value);
  if (isNaN(p)) return;
  const signal = s.sMin + (p - s.pMin)*(s.sMax - s.sMin)/(s.pMax - s.pMin);
  document.getElementById("output").innerText = signal.toFixed(3);
}
function signalToProcess() {
  const s = getScale();
  const sig = parseFloat(document.getElementById("sigInput").value);
  if (isNaN(sig)) return;
  const process = s.pMin + (sig - s.sMin)*(s.pMax - s.pMin)/(s.sMax - s.sMin);
  document.getElementById("output").innerText = process.toFixed(3);
}

/* ---------------- Counter API (with your token) ---------------- */

const countURL = 'https://api.counterapi.dev/hit/crossley-clarks-team/livecounter';
const token = 'ut_nX2vaLtalzaJfHiCxzvLTS3beYl9rm0vsOOmgoo6';

async function updateCounter() {
  try {
    const res = await fetch(countURL, {
      headers: {
        'Authorization': `Bearer ${token}`
      }
    });
    const data = await res.json();
    document.getElementById('liveCounter').innerText = `● ${data.value} visits`;
  } catch (err) {
    console.error('Could not load counter', err);
    document.getElementById('liveCounter').innerText = `● ? visits`;
  }
}

// Update counter on page load
updateCounter();
</script>

</body>
</html>
